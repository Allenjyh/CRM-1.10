<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>线路分配</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	    <link href="wechat/css/punch_card_location.css" rel="stylesheet" />
        <script src="wechat/js/jquery-3.3.1.min.js"></script>
        <!-- <script type="text/javascript" src="{{url('/wechat/js/lib/jquery.js')}}"></script> -->
        E3-7管理者-分配
        <style type="text/css">
        /**手风琴**/
            *, *:before, *:after {
                box-sizing: border-box;
            }

            .toggleChil {
                position: absolute;
                opacity: 0;
            }
            .toggleChil + label {
                position: relative;
                display: block;
                height: 45px;
                line-height: 45px;
                width: 100%;
                font-size: 14px;
                font-weight: 400;
                /* border-top: 1px solid rgba(0, 0, 0, 0.02); */
                background: #fff;
                cursor: pointer;
                color: rgba(0, 0, 0, 0.85);
                font-family: PingFang-SC-Regular;
                margin: 0 auto;
            }
            .toggleChil + label[for*='1'] {
                border: 0;
            }

            .toggleChil + label:after {
                content: ' ';
                display: block;
                position: absolute;
                top: 10px;
                right: 12px;
                font-family: fontawesome;
                transform: rotate(0deg);
                transition: .3s transform;
                height: 24px;
                width: 24px;
                background-image: url("../wechat/images/arrow.png");
                background-size: 24px;
                background-repeat: no-repeat;
                background-position: center;
            }

            .toggle-content {
                height: 0;
                transition: .3s all;
                overflow: hidden;
                background: rgba(216,216,216,0.03);
            }

            .toggle-content input {
                background-color: transparent;
            }

            .toggleChil:checked + label:after {
                transform: rotate(-90deg);
            }

            .toggleChil:checked + label + .toggle-content {
                height: auto;
            }
        /**手风琴end**/  
        
        /* 弹框 */
       #alert_box .list_each {
            border-bottom: 1px solid rgba(216, 216, 216, 0.2);
            height: 45px;
            position:relative;
        }
        #alert_box {
            position: fixed;
            left: 0;
            top:0;
            z-index: 100;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(37, 38, 45, .4);
            display: none;
        }
        #alert_box .top_box{
            position: fixed;
            left: 0;
            bottom:0px;
            z-index: 101;
            width: 100%;
            max-height: calc(100vh ) ;
            /*  */
            /* overflow: hidden; */
            overflow-y: auto;
            font-size: 14px;
            background-color: #fff;
        }
        #alert_box .content_box{
            /* position: fixed;
            left: 0;
            bottom:0px; */
            max-height:calc(100vh - 44px) ;
            overflow-y: auto;
        }
        .select-room-btnbox {
			height: 44px;
			line-height: 44px;
		}
        .select-room-btnbox table {
			width: 100%;
			text-align: center;
			font-size: 13px;
			font-family: PingFang-SC-Regular;
			font-weight: 200;
        }
        #repTitle{
            font-size:16px;
            font-weight:bold;
            line-height:45px;
            font-family:PingFang-SC-Bold,PingFang-SC;
        }
        #close_box,#sure_box{
            font-size:14px;
            font-weight:bold;
            color: #198CFF;
            line-height:45px;
            font-family:PingFang-SC-Bold,PingFang-SC;
        }
          /* 弹框 end*/  
            /* 下边框1px设置 */
        .box_1px{
            box-shadow: 0 1px 1px -1px rgba(151, 151, 151, 0.8); 
            -webkit-box-shadow: 0 1px 1px -1px rgba(151, 151, 151, 0.8); 
        }      
		</style>
	</head>
	<body>
        <div class="divider"></div>
        <div class="line_assignment">
            <ul>
                <li  style="position:relative;">
                    <input class="toggleChil" id="toggle1" type="checkbox" name="toggle" />
                    <label for="toggle1" >
                        <div class="list_each small_line" >
                            <div class="list_qb_l" >
                                <img  src="wechat/images/punch_card/route.png" alt="">
                            </div>
                            <div class="list_qb_r " style="width: 88.4%;border-bottom: 1px solid #0000001F;" >
                                <p class="fontsize16">线路1</p>
                            </div>
                        </div>
                    </label>
                    <section class="toggle-content">
                        <div>
                            <ul>
                                <li class="mail_list" >
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/mail_list1.png" alt="">
                                        </div>
                                        <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                            <p class="fontsize15" >小红
                                                <span class="list_qb_r_span" >删除</span>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li >
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/mail_list1.png" alt="">
                                        </div>
                                        <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                            <p class="fontsize15" >小红
                                                <span class="list_qb_r_span" >删除</span>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li onclick="location.href='#'">
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/add.png" alt="">
                                        </div>
                                        <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                            <p class="fontsize15 add_member" >添加成员加入</p>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </section>    
                </li>
                <li  style="position:relative;">
                    <input class="toggleChil" id="toggle2" type="checkbox" name="toggle" checked/>
                    <label for="toggle2" >
                        <div class="list_each small_line" >
                            <div class="list_qb_l" >
                                <img  src="wechat/images/punch_card/route.png" >
                            </div>
                            <div class="list_qb_r" style="width: 88.4%;border-bottom: 1px solid #0000001F;" >
                                <p class="fontsize16">线路2</p>
                            </div>
                        </div>
                    </label>
                    <section class="toggle-content">
                        <div>
                            <ul>
                                <li class="mail_list" data-user_id="1">
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/mail_list1.png" >
                                        </div>
                                        <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                            <p class="fontsize15" >小红
                                                <span class="list_qb_r_span" >删除</span>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li  class="mail_list"  data-user_id="2">
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/mail_list1.png" alt="">
                                        </div>
                                        <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                            <p class="fontsize15" >小红0
                                                <span class="list_qb_r_span " >删除</span>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li class="mail_add" data-plan_id="1">
                                    <div class="list_each small_line">
                                        <div class="list_qb_l"style="padding-left:20px;" >
                                            <img  src="wechat/images/punch_card/add.png" alt="">
                                        </div>
                                        <div class="list_qb_r add_member" style="border-bottom: 1px solid #0000001F;"><!-- addLi -->
                                            <p class="fontsize15 " >添加成员加入</p>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </section>    
                </li>
           </ul>
        </div>



        <!-- 弹框 -->
        <div id="alert_box" class="alert_box">
            
            <div class="top_box">
                <div class="select-room-btnbox" style="border-bottom: 1px solid #ebebeb;">
                    <table>
                        <tbody><tr>
                            <td id="close_box" style="color: #198CFF;">取消</td>
                            <td id="repTitle">选择线路</td>
                            <td id="sure_box" style="color: #198CFF;">确定</td>
                        </tr>
                    </tbody></table>
                </div>
                <div class="content_box">

                    <div class="list_each alert_each" data-user_id="3">
                        <div class="list_qb_l" style="padding-left: 10px;" >
                            <img style="width: 25px; height: 25px;" src="wechat/images/punch_card/mail_list1.png" alt="">
                        </div>
                        <div class="list_qb_r" style="width: 85.4%;">
                            <p class="fontsize16 add_title">小红1</p>
                                <b class="list_qb_r_div" style="position: absolute;right: 12px;top: 12px;color: rgba(0, 0, 0, 0.45)"> 
                                    <i class=""></i> </b><!-- class="rep-select" -->
                            </div>
                    </div>
                    <div class="list_each alert_each" data-user_id="4">
                        <div class="list_qb_l" style="padding-left: 10px;" >
                            <img style="width: 25px; height: 25px;" src="wechat/images/punch_card/mail_list1.png" alt="">
                        </div>
                        <div class="list_qb_r" style="width: 85.4%;">
                            <p class="fontsize16 add_title">小红2</p>
                                <b class="list_qb_r_div" style="position: absolute;right: 12px;top: 12px;color: rgba(0, 0, 0, 0.45)"> 
                                    <i  class=""></i> </b>
                            </div>
                    </div>
                    <div class="list_each alert_each" data-user_id="5">
                        <div class="list_qb_l" style="padding-left: 10px;" >
                            <img style="width: 25px; height: 25px;" src="wechat/images/punch_card/mail_list1.png" alt="">
                        </div>
                        <div class="list_qb_r" style="width: 85.4%;">
                            <p class="fontsize16 add_title">小红3</p>
                                <b class="list_qb_r_div" style="position: absolute;right: 12px;top: 12px;color: rgba(0, 0, 0, 0.45)">
                                     <i  class=""></i> </b>
                            </div>
                    </div>
        
                   
                </div>
            </div>
            <!-- <div style="height:85px;width:100%;position: fixed;bottom: 0;background: rgba(255, 255, 255, 1)">
                <span class="submit_btn" style="bottom: 25px;"> 保 存</span>
            </div> -->
        </div>
	</body>
	<script>
        // $('#alert_box .list_each').click(function(){
        //     $(this).find('i').addClass('rep-select').parents('.list_each').siblings().find('i').removeClass('rep-select');
        // })
        // $('.add_member').click(function(){
        //     $("#alert_box").show()
        // })
        // $('#close_box').click(function(){
        //     $("#alert_box").hide()
        // })
        // $('#sure_box').click(function(){
            
        // })
      

        $('#alert_box .alert_each').click(function(){
            $(this).find('i').addClass('rep-select').parents('.list_each').siblings().find('i').removeClass('rep-select');
        })
        $('.add_member').click(function(){
            $(this).addClass('addLi').parents('.line_li').siblings().find('.add_member').removeClass('addLi');
            $("#alert_box").show()
        })
        $('#close_box').click(function(){
            $("#alert_box").hide()
        })

    $('#sure_box').click(function(){
        var add_id = $(".rep-select").parents(".alert_each").attr('data-user_id');
        console.log(add_id)
        var add_title = $(".rep-select").parents(".list_qb_r").children(".add_title").text();
        var plan_id = $(".addLi").parents('.mail_add').attr('data-plan_id');
    
  
        $("#alert_box").hide()
        //  $loading.init({
        //     next: function (e) {
        //         var _that = e;
        //         $.ajax({
        //             type: "put",
        //             url: " /planDistribute"  ,
        //             data: {
        //                 plan_id:plan_id,
        //                 user_id:add_id
        //             },
        //             dataType: 'json',
        //             contentType: "application/x-www-form-urlencoded",
        //             success: function (res) {
        //                 console.log(res)
        //                 if(res.error_code == 200){
                            $(".addLi").parents('.mail_add').before(`<li class="mail_list" data-user_id="${add_id}">
                                <div class="list_each small_line">
                                    <div class="list_qb_l" style="padding-left:20px;" >
                                        <img  src="wechat/images/punch_card/mail_list1.png" alt="">
                                    </div>
                                    <div class="list_qb_r" style="border-bottom: 1px solid #0000001F;">
                                        <p class="fontsize15" >${add_title}
                                        <span class="list_qb_r_span"  onclick="_submit(this,${add_id},${plan_id})">删除</span>
                                        </p>
                                    </div>
                                </div>
                            </li>`);
                //             Toast.show("添加成功", 'center', 1500);    
                //         }else if(res.error_code == 2104){
                //             Toast.show("该保安已经被添加到该路线", 'center', 1500);
                //         }else{
                //            Toast.show(res.data ? res.data:res.message, 'center', 1500); 
                //         }
                //     },
                //     error: function(){
                //     },
                //     complete : function(){
                //         _that.close();
                //     }
                // })
            // }
        // })
    })
    </script>
</html>